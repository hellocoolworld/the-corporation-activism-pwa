<ion-toolbar>
    <ion-buttons slot="start">
        <ion-button fill="clear" size="small" color="medium" (click)="closeModal()">
            <ion-icon mode="md" src="assets/icons/x.svg"></ion-icon>
        </ion-button>
    </ion-buttons>
</ion-toolbar>

<ion-content scrollX="false" scrollY="false">
    <div class="content-wrapper">
        <div class="header no-border has-toolbar">
            <div class="title">
                Change Password
            </div>
        </div>

        <div class="wrapper">
            <div class="content-scroll">

                <!-- old password -->
                <div class="form-label">Old Password</div>
                <form-field fill="true" color="medium">
                    <ion-icon prefix src="assets/icons/unlock.svg"></ion-icon>
                    <ion-input inputRef type="password" [(ngModel)]="model.oldPassword" #opassword="ngModel" required></ion-input>

                    <div errors *ngIf="opassword.touched && opassword.invalid">
                        <span *ngIf="opassword?.errors?.required">Required</span>
                    </div>
                </form-field>

                <!-- new password -->
                <div class="form-label">New Password</div>
                <form-field fill="true" color="medium">
                    <ion-icon prefix src="assets/icons/lock.svg"></ion-icon>
                    <ion-input inputRef type="password" [(ngModel)]="model.password" #password="ngModel" (secure)="passwordStrength = $event" required></ion-input>
                    <small class="pass-strength" suffix [ngStyle]="{ background: 'var(--ion-color-' + passwordStrength + ')' }"></small>
                    <div errors *ngIf="password.touched && password.invalid">
                        <span *ngIf="password?.errors?.required">Required</span>
                        <span *ngIf="password?.errors?.secure">Password</span>
                    </div>
                </form-field>

                <!-- retype password -->
                <div class="form-label">Retype Password</div>
                <form-field fill="true" color="medium">
                    <ion-icon prefix src="assets/icons/key.svg"></ion-icon>
                    <ion-input inputRef type="password" [(ngModel)]="model.rpassword" [compare-password]="password" #rpassword="ngModel" required></ion-input>

                    <div errors *ngIf="rpassword.touched && rpassword.invalid">
                        <span *ngIf="rpassword?.errors?.required">Required</span>
                        <span *ngIf="rpassword?.errors?.compareTo">Passwords do not match</span>
                    </div>
                </form-field>

                <ion-button expand="full" shape="round" [btnStatus]="loading" (click)="changePassword()">
                    Change Password
                </ion-button>
            </div>
        </div>
    </div>
</ion-content>