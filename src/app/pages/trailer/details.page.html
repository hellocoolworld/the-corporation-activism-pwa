<app-header></app-header>
<ion-content class="hasHeader page-content">
    <div class="story-details">
        <h1>{{ story.title }}</h1>
        <div class="story-details-content">
            <div [style]="sanatizeVideoResponsiveStyles(story.aspectRatio)">
                <iframe [src]="sanatizeVideoUrl(story.vimeoCode)" style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
            </div>
            <script src="https://player.vimeo.com/api/player.js"></script>
            <p>{{ story.summary }}</p>
            <ion-item (click)="loadAuthorBio(story.id)" [detail]="story.authorBioFull == '' ? false : true" lines="none" class="author-info">
                <ion-avatar slot="start">
                    <img [src]="story.authorImg" />
                </ion-avatar>
                <ion-label text-wrap>
                    <h4>{{ story.authorName }}</h4>
                    <p>{{ story.authorBioSummary }}</p>
                </ion-label>
            </ion-item>
            <ion-grid class="action-bar-wrapper">
                <ion-row>
                    <ion-col size="6" class="pledges">
                        <ion-item class="header">
                            <ion-button slot="start" fill="clear" (click)="showHelpActionPledgeModal()">
                                Action Pledges
                                <ion-icon name="help-circle" slot="end"></ion-icon>
                            </ion-button>
                        </ion-item>
                        <ion-item class="content">
                            <div class="stats">
                                <ion-icon name="trophy" size="large"></ion-icon>
                                <ion-label>{{ story.pledgeCount }}</ion-label>
                            </div>
                        </ion-item>
                        <ion-button fill="solid" id="add-your-pledge" class="add-your-pledge content-btn" (click)="onAddYourPledge()">
                            Pledge
                        </ion-button>
                        <div id="you-have-pledged" class="you-have-pledged hidden">
                            <h4>You've pledged!</h4>
                            <ion-button fill="clear" (click)="sharePledge()">
                                <ion-icon name="share-alt" slot="start"></ion-icon>
                                Share
                            </ion-button>
                        </div>
                    </ion-col>
                    <ion-col size="6" class="avocadometer">
                        <ion-item class="header">
                            <ion-button slot="start" fill="clear" (click)="showHelpAvocadometerModal()">
                                Avocadometer
                                <ion-icon name="help-circle" slot="end"></ion-icon>
                            </ion-button>
                        </ion-item>
                        <ion-item class="content">
                            <div class="stats">
                                <ion-icon src="/assets/images/avocadometer.svg" size="large"></ion-icon>
                                <ion-label>{{ story.avocadoCount }}</ion-label>
                            </div>
                        </ion-item>
                        <h4>Add avocados:</h4>
                        <ht-add-avocados [rating]="userAvocados" (ratingChange)="onAddAvocados($event)"></ht-add-avocados>
                    </ion-col>
                </ion-row>
            </ion-grid>
            <div *ngIf="story.body !== ''" class="story-body-section" [innerHTML]="sanatizeHTML(story.body)"></div>
            <hr *ngIf="story.body !== ''" />
            <div class="story-body-section">
                <h3>Take Action To Support This Story</h3>
                <p>{{ story.takeActionSummary }}</p>
                <div [innerHTML]="sanatizeHTML(story.takeActionBody)"></div>
            </div>
            <!--<div class="share-buttons">
                    <ion-button class="social-sharing-btn" color="facebook">
                        <ion-icon slot="icon-only" name="logo-facebook"></ion-icon>
                    </ion-button>
                    <ion-button class="social-sharing-btn" color="twitter">
                        <ion-icon slot="icon-only" name="logo-twitter"></ion-icon>
                    </ion-button>
                </div>-_
                <div class="published-date">
                    {{ story.updatedAt }}
                </div>
            
        -->
        </div>
    </div>
</ion-content>
<app-footer></app-footer>